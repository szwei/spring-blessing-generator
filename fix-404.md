# 修复 GitHub Pages 404 错误

## 问题诊断

如果访问网站时出现 `main.js 404` 错误，通常是因为路径配置问题。

## 解决方案

### 方案一：检查并修复 vite.config.js

确保 `vite.config.js` 中的 `base` 配置正确：

```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { resolve } from 'path'

export default defineConfig({
  // 如果仓库名是 YOUR_USERNAME.github.io，base 设为 '/'
  // 如果仓库名是 spring-blessing-generator，base 设为 '/spring-blessing-generator/'
  base: '/spring-blessing-generator/',  // 确保这里与仓库名一致
  plugins: [vue()],
  // ... 其他配置
})
```

### 方案二：使用相对路径（推荐）

修改 `vite.config.js` 使用相对路径：

```javascript
export default defineConfig({
  base: './',  // 使用相对路径，避免路径问题
  // ... 其他配置
})
```

### 方案三：重新构建并部署

```bash
# 1. 清理旧的构建文件
rmdir /s /q dist  # Windows
# 或
rm -rf dist  # Linux/Mac

# 2. 重新构建
npm run build

# 3. 检查 dist/index.html 中的路径
# 应该看到类似：href="/spring-blessing-generator/assets/index.xxx.js"
# 或相对路径：href="./assets/index.xxx.js"

# 4. 重新部署
git add .
git commit -m "修复 404 错误"
git push
```

### 方案四：检查 GitHub Pages 配置

1. 进入仓库 Settings → Pages
2. 确认配置：
   - Source: Deploy from a branch
   - Branch: main
   - Folder: / (root)  不是 /dist！

3. 如果使用 GitHub Actions：
   - Source: GitHub Actions

### 方案五：使用 GitHub Actions 自动部署（最推荐）

确保 `.github/workflows/deploy.yml` 文件存在，然后在 GitHub 中：

1. Settings → Pages
2. Build and deployment → Source: 选择 "GitHub Actions"
3. 每次推送代码会自动构建并部署

## 快速修复步骤

### Windows 用户：

```bash
cd E:\testAi\test1\spring-blessing-generator

# 清理并重新构建
rmdir /s /q dist
npm run build

# 检查构建结果
dir dist

# 提交并推送
git add .
git commit -m "修复 404 错误：重新构建"
git push
```

### Linux/Mac 用户：

```bash
cd E:\testAi\test1\spring-blessing-generator

# 清理并重新构建
rm -rf dist
npm run build

# 检查构建结果
ls -la dist

# 提交并推送
git add .
git commit -m "修复 404 错误：重新构建"
git push
```

## 验证修复

1. 等待 1-3 分钟让 GitHub Pages 更新
2. 打开浏览器访问你的网站
3. 打开开发者工具（F12）查看 Console
4. 检查是否还有 404 错误

## 常见问题

### Q1: 为什么会出现 404？

A: Vite 默认使用绝对路径 `/`，但在 GitHub Pages 上如果仓库名不是 `YOUR_USERNAME.github.io`，路径就变成了 `/仓库名/`，导致资源文件找不到。

### Q2: 使用 `base: './'` 会有什么影响？

A: 使用相对路径可以避免路径问题，但需要注意：
- 所有资源引用都变成相对路径
- 确保所有链接和资源路径都是正确的
- 适用于大多数部署场景

### Q3: 如何确定应该使用什么 base？

A:
- 仓库名是 `YOUR_USERNAME.github.io` → `base: '/'`
- 仓库名是 `your-project` → `base: '/your-project/'`
- 不确定 → `base: './'` （相对路径）

### Q4: 构建后的文件应该放在哪里？

A:
- 如果使用 GitHub Pages 的 "Deploy from a branch"，构建后的 `dist` 目录会被忽略
- 如果使用 GitHub Actions，Actions 会自动构建并部署
- 不要手动上传 dist 目录到 GitHub

## 推荐配置（最终版）

### vite.config.js

```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { resolve } from 'path'

export default defineConfig({
  // 使用相对路径，避免 GitHub Pages 路径问题
  base: './',
  plugins: [vue()],
  resolve: {
    alias: {
      '@': resolve(__dirname, 'src')
    }
  },
  server: {
    port: 3000,
    open: true
  },
  build: {
    outDir: 'dist',
    assetsDir: 'assets',
    sourcemap: false
  }
})
```

### GitHub Pages 配置

**方式一：使用 GitHub Actions（推荐）**

1. Settings → Pages
2. Build and deployment → Source: GitHub Actions
3. `.github/workflows/deploy.yml` 会自动处理

**方式二：手动部署**

1. Settings → Pages
2. Build and deployment → Source: Deploy from a branch
3. Branch: main, Folder: / (root)
4. 确保 `.gitignore` 中没有忽略必要的文件

## 需要帮助？

如果问题仍未解决，请：
1. 检查浏览器 Console 的具体错误信息
2. 检查 Network 标签，看哪些文件 404 了
3. 检查 GitHub Pages 的部署日志
4. 确认 `vite.config.js` 中的 base 配置正确